<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Blog - docker</title><link href="https://cropse.github.io/cropse_site/" rel="alternate"></link><link href="https://cropse.github.io/cropse_site/feeds/docker.atom.xml" rel="self"></link><id>https://cropse.github.io/cropse_site/</id><updated>2017-03-24T17:41:37+08:00</updated><entry><title>Docker cheat sheet</title><link href="https://cropse.github.io/cropse_site/docker-cheat-sheet-.html" rel="alternate"></link><published>2017-03-24T17:41:37+08:00</published><updated>2017-03-24T17:41:37+08:00</updated><author><name>Cropse</name></author><id>tag:cropse.github.io,2017-03-24:/cropse_site/docker-cheat-sheet-.html</id><summary type="html"></summary><content type="html">&lt;p&gt;Useage:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;docker [option] {Command}&lt;/code&gt;&lt;br&gt;
    -i interactive mode&lt;br&gt;
    -t pseudo TTY mode&lt;br&gt;
    -d background mode&lt;br&gt;
    -p {local host port}:{container vps port} porting mapping&lt;/p&gt;
&lt;p&gt;背景執行請用 -it -d, 這樣後面就可以用logs去查背景輸出&lt;/p&gt;
&lt;p&gt;Command:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;inspect&lt;/code&gt; &lt;code&gt;{container_id}&lt;/code&gt; looking for detail , json form&lt;/li&gt;
&lt;li&gt;&lt;code&gt;logs&lt;/code&gt; &lt;code&gt;{container_id}&lt;/code&gt; inquery process log in background&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ps&lt;/code&gt; inquery running container&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-a&lt;/code&gt; : according terminated &lt;/li&gt;
&lt;li&gt;&lt;code&gt;-q&lt;/code&gt; : only inquery id&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;images&lt;/code&gt; 查本地中的 image&lt;ul&gt;
&lt;li&gt;&lt;code&gt;-q&lt;/code&gt; : only id&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;commit&lt;/code&gt; &lt;code&gt;{container_id}&lt;/code&gt; &lt;code&gt;{repository_name:tag}&lt;/code&gt; &lt;/li&gt;
&lt;li&gt;&lt;code&gt;build&lt;/code&gt; build Dockerfile&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;-t&lt;/code&gt; &lt;code&gt;{Tag name}&lt;/code&gt; : add Tag&lt;br&gt;
&lt;code&gt;login&lt;/code&gt; login docker registry to be ready to push&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Delete all containers&lt;/strong&gt;&lt;br&gt;
&lt;code&gt;docker rm $(docker ps -a -q)&lt;/code&gt; &lt;br&gt;
&lt;strong&gt;Delete all images&lt;/strong&gt;&lt;br&gt;
&lt;code&gt;docker rmi $(docker images -q)&lt;/code&gt; &lt;br&gt;
&lt;strong&gt;Login to running container&lt;/strong&gt;&lt;br&gt;
&lt;code&gt;docker exec -it {container_id} bash&lt;/code&gt; &lt;/p&gt;
&lt;hr&gt;
&lt;h2&gt;Dockerfile&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;FROM&lt;/code&gt; &lt;code&gt;{OS}&lt;/code&gt; &lt;br&gt;
&lt;code&gt;RUN&lt;/code&gt; &lt;code&gt;{shell_command}&lt;/code&gt; command on build image&lt;br&gt;
&lt;code&gt;CMD&lt;/code&gt; &lt;code&gt;{shell_command}&lt;/code&gt; command after container build&lt;br&gt;
&lt;code&gt;COPY&lt;/code&gt; &lt;code&gt;{localfile_path}&lt;/code&gt; &lt;code&gt;{container_path}&lt;/code&gt; cp指令&lt;br&gt;
&lt;code&gt;ADD&lt;/code&gt; 類似wget之類的透過URL下載，可以自動解壓縮，但是非必要建議COPY&lt;/p&gt;
&lt;hr&gt;
&lt;h1&gt;Docker Compose Commands&lt;/h1&gt;
&lt;p&gt;&lt;code&gt;docker compose up&lt;/code&gt; starts up all the containers. &lt;br&gt;
&lt;code&gt;docker compose ps&lt;/code&gt; checks the status of the containers managed by docker compose. &lt;br&gt;
&lt;code&gt;docker compose logs&lt;/code&gt; outputs colored and aggregated logs for the compose-managed &lt;br&gt;
containers. &lt;br&gt;
&lt;code&gt;docker compose logs&lt;/code&gt;  &lt;code&gt;-f&lt;/code&gt; outputs appended log when the log grows. &lt;br&gt;
&lt;code&gt;docker compose logs&lt;/code&gt; &lt;code&gt;{container name}&lt;/code&gt; in the end outputs the logs of a specific &lt;br&gt;
container. &lt;br&gt;
&lt;code&gt;docker compose stop&lt;/code&gt; stops all the running containers without removing them. &lt;br&gt;
&lt;code&gt;docker compose rm&lt;/code&gt; removes all the containers.&lt;br&gt;
&lt;code&gt;docker compose build&lt;/code&gt; rebuilds all the images.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;&lt;em&gt;Docker-compose 不需要做link，內部的port根據services名稱方便管理跟開關功能&lt;/em&gt;&lt;/strong&gt;&lt;/p&gt;</content><category term="docker"></category></entry></feed>